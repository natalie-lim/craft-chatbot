(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[853],{1439:(e,t,s)=>{"use strict";s.d(t,{CN:()=>r,HW:()=>u,Mn:()=>o,db:()=>d,j2:()=>c});var a=s(3915),n=s(6203),l=s(5317);let r={apiKey:"AIzaSyCXwVaGeaL1656E9A30UV9XR2zk3SJwDZ4",authDomain:"task-manager-4f8be.firebaseapp.com",projectId:"task-manager-4f8be",storageBucket:"task-manager-4f8be.firebasestorage.app",messagingSenderId:"299806984749",appId:"1:299806984749:web:98f92c253605d5107246a4"},i=0===(0,a.Dk)().length?(0,a.Wp)(r):(0,a.Dk)()[0],c=(0,n.xI)(i),o=new n.HF,d=(0,l.aU)(i);async function u(){return new Promise((e,t)=>{let s=(0,n.hg)(c,t=>{s(),e(t)},t)})}},2857:(e,t,s)=>{Promise.resolve().then(s.bind(s,6352))},5231:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var a=s(5155);s(5695);var n=s(2115),l=s(8305),r=s.n(l);function i(e){let{text:t,delay:s=100}=e,[l,i]=(0,n.useState)(""),[c,o]=(0,n.useState)(0);return(0,n.useEffect)(()=>{if(c<t.length){let e=setInterval(()=>{i(e=>e+t[c]),o(e=>e+1)},s);return()=>clearInterval(e)}},[l,c,t,s]),(0,a.jsx)("span",{className:"".concat(r().className," text-6xl font-semibold pt-4"),children:l})}s(6203),s(5317),s(1439)},6352:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>N,deleteTaskFromFirestore:()=>y});var a=s(5155),n=s(2115),l=s(5294),r=s(4725),i=s.n(r),c=s(5317),o=s(9774),d=s.n(o),u=s(2418),x=s(6670),m=s(1439);function p(e){let{col:t,title:s,colorInput:l,taskIndex:r,taskMap:i}=e,[o,p]=(0,n.useState)(l||function(){let e=Math.floor(360*Math.random());return"hsl(".concat(e,", 70%, 85%)")}()),[f,h]=(0,n.useState)(s||""),[g,b]=(0,n.useState)(!1),[j,v]=(0,n.useState)(null),[w,k]=(0,n.useState)(null),y=r[t];(0,n.useEffect)(()=>{h(s||"")},[s]),(0,n.useEffect)(()=>{l&&p(l)},[l]),(0,n.useEffect)(()=>{(async()=>{v(await (0,m.HW)())})()},[]);let N=async e=>{if(p(e),j)try{let t=(0,c.H9)(m.db,"userInfo",j.uid);await (0,c.mZ)(t,{["tasks.".concat(y,".color")]:e})}catch(e){console.error("Error updating color:",e)}},I=async()=>{if(j)try{let e=(0,c.H9)(m.db,"userInfo",j.uid),t=await (0,c.x7)(e);if(!t.exists())return void console.error("Document not found");let s=(t.data().tasks||{})[y];if(!s)return void console.error("Column not found in document");let a=[...s.taskDescriptions||[]];a.push(""),await (0,c.mZ)(e,{["tasks.".concat(y,".taskDescriptions")]:a})}catch(e){console.error("Error adding task:",e)}};return(0,a.jsx)("div",{className:"w-full relative",children:(0,a.jsxs)("div",{className:"flex h-10 p-2 items-center justify-between",style:{backgroundColor:o},children:[(0,a.jsx)("input",{className:"".concat(d().className," text-xl bg-transparent outline-none w-full"),value:f,placeholder:"Column Title",onChange:e=>{let t=e.target.value;h(t),w&&clearTimeout(w),k(setTimeout(async()=>{if(j)try{let e=(0,c.H9)(m.db,"userInfo",j.uid);await (0,c.mZ)(e,{["tasks.".concat(y,".headerDescription")]:t})}catch(e){console.error("Error updating title:",e)}},400))}}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 z-10 ml-2",children:[(0,a.jsx)(u.A,{trigger:(0,a.jsx)("button",{onClick:()=>b(!g),children:(0,a.jsx)("img",{src:"../assets/pencil.svg",alt:"edit",width:18,height:18})}),position:"bottom center",onOpen:()=>b(!0),onClose:()=>b(!1),children:(0,a.jsx)(x.jI,{color:o,onChange:N})}),(0,a.jsx)("button",{onClick:I,children:(0,a.jsx)("img",{src:"../assets/plus-square.svg",alt:"add task",width:20,height:20})})]})]})})}var f=s(7200),h=s.n(f);function g(e){let{description:t,meanness:s,wordCount:l,column:r,index:i}=e,[o,d]=(0,n.useState)(t),[x,p]=(0,n.useState)(!1),[f,g]=(0,n.useState)(null),[b,j]=(0,n.useState)("");(0,n.useEffect)(()=>{d(t)},[t]),(0,n.useEffect)(()=>{(async()=>{g(await (0,m.HW)())})()},[]);let v=async()=>{try{let e=await fetch("/api/suggest",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:"Give suggestions for a person who wants to complete ".concat(o," and say it really ").concat(s," using only about ").concat(l," words")})});return(await e.json()).result}catch(e){return console.error("Failed to fetch AI suggestion:",e),"Error retrieving suggestion."}};return(0,a.jsxs)("div",{className:"w-full flex flex-row justify-between items-center",children:[(0,a.jsx)(u.A,{trigger:(0,a.jsx)("button",{className:"pr-2",children:(0,a.jsx)("img",{src:"../assets/Key.svg",alt:"ai help",width:20,height:20})}),position:"bottom center",closeOnDocumentClick:!0,onOpen:async()=>{j("Loading..."),j(await v())},children:(0,a.jsxs)("div",{className:"".concat(h().className," text-sm rounded shadow p-4 text-black bg-gray-200"),style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:50},children:[(0,a.jsxs)("p",{children:["AI suggestion for: ",(0,a.jsx)("strong",{children:o})]}),(0,a.jsx)("div",{className:"w-full min-h-48 mt-4 bg-white p-2 rounded overflow-auto",children:b})]})}),(0,a.jsx)("input",{className:"".concat(h().className," text-sm w-full bg-transparent outline-none flex-grow"),value:o,placeholder:"insert task",onChange:e=>{let t=e.target.value;d(t),f&&(x&&clearTimeout(x),p(setTimeout(async()=>{try{let e=(0,c.H9)(m.db,"userInfo",f.uid),s=await (0,c.x7)(e);if(!s.exists())return void console.error("Document not found");let a=(s.data().tasks||{})[r];if(!a)return void console.error("Column not found in document");let n=[...a.taskDescriptions||[]];n[i]=t,await (0,c.mZ)(e,{["tasks.".concat(r,".taskDescriptions")]:n}),console.log("Task updated: column ".concat(r,", index ").concat(i))}catch(e){console.error("Error updating task:",e)}},1e3)))}})]})}var b=s(5231),j=s(1335),v=s.n(j);let w=[{file:"Key.svg",label:"ai insights for your task"},{file:"pencil.svg",label:"change heading colors"},{file:"plus-square.svg",label:"add task to column"}];function k(){return(0,a.jsx)("div",{className:"flex flex-col gap-4 p-4",children:w.map(e=>{let{file:t,label:s}=e;return(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("img",{src:"../assets/".concat(t),alt:s,width:24,height:24}),(0,a.jsx)("span",{className:"".concat(v().className," text-xl"),children:s})]},t)})})}async function y(e,t,s){let a=await (0,m.HW)();if(!a)return;let n={...e},l=[...n[t].taskDescriptions];l.splice(s,1),n[t]={...n[t],taskDescriptions:l};let r=(0,c.H9)(m.db,"userInfo",a.uid);await (0,c.mZ)(r,{tasks:n})}function N(){let[e,t]=(0,n.useState)({}),[s,r]=(0,n.useState)([]),[o,d]=(0,n.useState)(""),[x,f]=(0,n.useState)(!0),[h,j]=(0,n.useState)("nice"),[v,w]=(0,n.useState)(150),N=["flattering","encouraging","pragmatic","stern","bitchy"];async function I(a){let{source:n,destination:l}=a;if(!l)return;let r=parseInt(n.droppableId),i=parseInt(l.droppableId),o=s[r],d=s[i],u=structuredClone(e);if(o===d){let e=[...u[o].taskDescriptions],[t]=e.splice(n.index,1);e.splice(l.index,0,t),u[o].taskDescriptions=e}else{let e=[...u[o].taskDescriptions],t=[...u[d].taskDescriptions],[s]=e.splice(n.index,1);t.splice(l.index,0,s),u[o].taskDescriptions=e,u[d].taskDescriptions=t}t(u);let x=await (0,m.HW)(),p=(0,c.H9)(m.db,"userInfo",x.uid);await (0,c.mZ)(p,{tasks:u})}(0,n.useEffect)(()=>{let e;return(async()=>{let s=await (0,m.HW)();if(!s)return;let a=(0,c.H9)(m.db,"userInfo",s.uid);e=(0,c.aQ)(a,e=>{if(e.exists()){let s=e.data();d(s.displayName||"friend");let a=s.tasks||{};t(a),r(Object.keys(a)),f(!1)}else console.log("No such document!"),f(!1)})})(),()=>{e&&e()}},[]);let D=(t,n)=>{var r;return((null==(r=e[t])?void 0:r.taskDescriptions)||[]).map((n,r)=>{let i="task-".concat(t,"-").concat(r,"-").concat(n);return(0,a.jsx)(l.sx,{draggableId:i,index:r,children:(l,i)=>(0,a.jsx)("div",{ref:l.innerRef,...l.draggableProps,...l.dragHandleProps,className:"select-none p-2 w-full justify-center items-center mb-2 rounded border transition-all duration-200 ".concat(i.isDragging?"bg-gray-200 border-white opacity-50":"bg-white border-gray-300 opacity-100"),children:(0,a.jsxs)("div",{className:"flex items-center w-full",children:[(0,a.jsx)("div",{className:"flex-grow",children:(0,a.jsx)(g,{description:n,meanness:h,wordCount:v,column:t,index:r,taskIndex:s})}),(0,a.jsx)("button",{onClick:async()=>{await y(e,t,r)},className:"ml-4 text-red-500 hover:text-red-700 text-sm shrink-0",children:"âœ•"})]})})},i)})};return x?(0,a.jsx)("div",{className:"pt-12 flex flex-col items-center justify-center",children:(0,a.jsx)("h1",{className:"".concat(i().className," text-5xl"),children:"Loading..."})}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"pt-8 flex flex-col items-left pl-24",children:[(0,a.jsx)(b.A,{text:"tasks."}),(0,a.jsx)("h2",{className:"".concat(i().className," text-xl pt-2"),children:o})]}),(0,a.jsx)("div",{className:"absolute top-6 right-8 flex pt-8 gap-4 z-50",children:(0,a.jsx)(u.A,{trigger:(0,a.jsx)("button",{className:"bg-black text-white px-4 py-2 rounded-lg hover:bg-gray-800 transition",children:"info"}),position:"bottom center",closeOnDocumentClick:!0,onOpen:async()=>{},children:(0,a.jsxs)("div",{className:"rounded shadow p-4 max-w-60 text-black bg-gray-200",children:[(0,a.jsx)("h2",{className:"".concat(i().className," text-lg text-black"),children:"what each symbol means: "}),(0,a.jsx)(k,{})]})})}),(0,a.jsx)("div",{className:"flex items-center justify-center w-full",children:(0,a.jsx)("div",{className:"flex flex-row",children:(0,a.jsx)("div",{className:"flex w-screen gap-4 pl-24 pr-24 pt-8 overflow-x-hidden",children:(0,a.jsx)(l.JY,{onDragEnd:I,children:s.map((t,n)=>(0,a.jsx)(l.gL,{droppableId:"".concat(n),children:(l,r)=>{var i,c;return(0,a.jsxs)("div",{ref:l.innerRef,...l.droppableProps,className:"flex flex-col flex-1 min-h-[100px] transition-colors ".concat(r.isDraggingOver?"bg-gray-100":"bg-white"),children:[(0,a.jsx)(p,{col:n,title:null==(i=e[t])?void 0:i.headerDescription,colorInput:null==(c=e[t])?void 0:c.color,taskIndex:s,taskMap:e}),D(t,n),l.placeholder]})}},t))})})})}),(0,a.jsxs)("div",{className:"fixed bottom-2 m-4 left-0 w-full bg-white shadow-inner px-8 py-4 flex justify-between items-center z-50",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("label",{className:"".concat(i().className," text-sm mb-1"),children:["Word Count: ",v]}),(0,a.jsx)("input",{type:"range",min:"50",max:"300",step:"10",value:v,onChange:e=>w(parseInt(e.target.value)),className:"w-64 accent-black"})]}),(0,a.jsxs)("div",{className:"flex flex-col mr-8",children:[(0,a.jsxs)("label",{className:"".concat(i().className," text-sm mb-1"),children:["Tone: ",h]}),(0,a.jsx)("input",{type:"range",min:"0",max:N.length-1,step:"0.",value:N.indexOf(h),onChange:e=>{j(N[parseInt(e.target.value)])},className:"w-64 accent-black"})]})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[393,596,506,992,965,309,600,88,441,684,358],()=>t(2857)),_N_E=e.O()}]);